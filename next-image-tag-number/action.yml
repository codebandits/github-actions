name: Next Image Tag Number
description: Get the next tag number for an image in an OCI repository.

inputs:
  image_repository_url:
    description: The URL of the OCI-compatible image repository.
    required: true
  bearer_token:
    description: Optional bearer token for repository authentication.
    required: false
  initial_number:
    description: Starting tag number if no tags exist.
    default: '1'
    required: false
  tag_prefix:
    description: Prefix for the tags.
    default: 'build-'
    required: false

outputs:
  tag:
    description: The next tag, including the prefix and tag number.
  number:
    description: The next tag number.

runs:
  using: docker
  image: Dockerfile
  args:
    - ${{ inputs.image_repository_url }}
    - ${{ inputs.bearer_token }}
    - ${{ inputs.initial_number }}
    - ${{ inputs.tag_prefix }}
